!function(){var g;function e(t){return new EventSource(t,{withCredentials:!0})}function a(t){return t.trim().split(/\s+/)}function s(t,n){null!=t&&(o(t,"sse-connect").forEach(function(t){var e=g.getAttributeValue(t,"sse-connect");null!=e&&r(t,e,n)}),o(t,"hx-sse").forEach(function(t){var e=function(t){if(t=g.getAttributeValue(t,"hx-sse"))for(var e=a(t),n=0;n<e.length;n++){var r=e[n].split(/:(.+)/);if("connect"===r[0])return r[1]}}(t);null!=e&&r(t,e,n)}))}function r(e,t,n){var r=htmx.createEventSource(t);r.onerror=function(t){g.triggerErrorEvent(e,"htmx:sseError",{error:t,source:r}),v(e)||r.readyState===EventSource.CLOSED&&(n=n||0,t=Math.random()*(2^n)*500,window.setTimeout(function(){s(e,Math.min(7,n+1))},t))},r.onopen=function(t){g.triggerEvent(e,"htmx:sseOpen",{source:r})},g.getInternalData(e).sseEventSource=r}function v(t){if(!g.bodyContains(t)){t=g.getInternalData(t).sseEventSource;if(null!=t)return t.close(),1}}function o(t,e){var n=[];return g.hasAttribute(t,e)&&n.push(t),t.querySelectorAll("["+e+"], [data-"+e+"]").forEach(function(t){n.push(t)}),n}function h(t){return function(){t.tasks.forEach(function(t){t.call()}),t.elts.forEach(function(t){t.classList&&t.classList.remove(htmx.config.settlingClass),g.triggerEvent(t,"htmx:afterSettle")})}}function i(t){return null!=g.getInternalData(t).sseEventSource}htmx.defineExtension("sse",{init:function(t){g=t,null==htmx.createEventSource&&(htmx.createEventSource=e)},onEvent:function(t,e){switch(t){case"htmx:beforeCleanupElement":var n=g.getInternalData(e.target);return void(n.sseEventSource&&n.sseEventSource.close());case"htmx:afterProcessNode":s(e.target),!function(c){var l=g.getClosestMatch(c,i);if(null==l)return;var f=g.getInternalData(l).sseEventSource;o(c,"sse-swap").forEach(function(o){var t,e=g.getAttributeValue(o,"sse-swap");t=e?e.split(","):function(t){var t=g.getAttributeValue(t,"hx-sse"),e=[];if(null!=t)for(var n=a(t),r=0;r<n.length;r++){var s=n[r].split(/:(.+)/);"swap"===s[0]&&e.push(s[1])}return e}(o);for(var n=0;n<t.length;n++){var i=t[n].trim(),u=function(t){var e,n,r,s,a;v(l)||(g.bodyContains(o)||f.removeEventListener(i,u),e=o,n=t.data,g.withExtensions(e,function(t){n=t.transformResponse(n,null,e)}),r=g.getSwapSpecification(e),s=g.getTarget(e),a=g.makeSettleInfo(e),g.selectAndSwap(r.swapStyle,s,e,n,a),a.elts.forEach(function(t){t.classList&&t.classList.add(htmx.config.settlingClass),g.triggerEvent(t,"htmx:beforeSettle")}),0<r.settleDelay?setTimeout(h(a),r.settleDelay):h(a)(),g.triggerEvent(c,"htmx:sseMessage",t))};g.getInternalData(o).sseEventListener=u,f.addEventListener(i,u)}}),o(c,"hx-trigger").forEach(function(t){t=g.getAttributeValue(t,"hx-trigger");null!=t&&"sse:"==t.slice(0,4)&&(t=t.substr(4))})}(e.target)}}})}();